/* file_preview.css — Bright & Focused viewer theme
   Font: 'Inter', system-ui
   Tip: thêm class .body--model-zoom lên <body> nếu muốn khóa cuộn toàn trang khi mở viewer
*/

:root{
  --bg:#ffffff;
  --fg:#1f2937;
  --muted:#6b7280;
  --card:#f9fafb;
  --border:#e5e7eb;
  --accent:#2563eb;
  --radius:12px;
  --shadow:0 6px 16px rgba(0,0,0,.08);
}

*{box-sizing:border-box}

html,body{
  margin:0; padding:0; height:100%;
  background:var(--bg); color:var(--fg);
  font-family:'Inter',system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial,sans-serif;
  -webkit-font-smoothing:antialiased; -moz-osx-font-smoothing:grayscale;
}

/* Khóa cuộn toàn trang khi cần (tùy chọn) */
.body--model-zoom { overflow: hidden; }

/* Top bar */
.topbar{
  position:sticky; top:0; z-index:10;
  background:var(--card);
  border-bottom:1px solid var(--border);
  display:flex; align-items:center; gap:12px;
  padding:10px 18px; box-shadow:var(--shadow);
}

.file{
  max-width:65%; font-weight:600; font-size:15px;
  overflow:hidden; text-overflow:ellipsis; white-space:nowrap;
}

.controls{ margin-left:auto; display:flex; gap:10px; align-items:center }

.btn{
  appearance:none; border:1px solid var(--border); background:#fff; color:var(--fg);
  border-radius:8px; padding:6px 14px; font-size:14px; font-weight:500; cursor:pointer;
  text-decoration:none; transition:all .2s ease;
}
.btn:hover{
  background:var(--accent); color:#fff; border-color:var(--accent);
  box-shadow:0 3px 10px rgba(37,99,235,.28);
}

/* Layout */
.wrap{ width:100%; max-width:1280px; margin:16px auto 24px; padding:0 16px }

.viewer{
  position:relative;
  background:var(--card);
  border:1px solid var(--border);
  border-radius:var(--radius);
  box-shadow:var(--shadow);
  overflow:hidden;                   /* Ẩn thanh cuộn bên trong viewer */
  min-height:calc(100vh - 140px);
  padding:6px;

  /* NGĂN TRANG CUỘN KHI ZOOM BẰNG WHEEL TRONG VIEWER */
  overscroll-behavior: contain;      /* chặn cuộn “lan” ra ngoài */
}

/* Canvas xeokit & vùng nhúng mô hình */
#xeokitCanvas,
.viewer canvas,
.ifc-view {
  display:block;
  width:100%; height:calc(100vh - 160px);
  background:#fff;
  /* Chặn thao tác cuộn & pinch của trình duyệt trên phần tử này */
  touch-action: none;                /* cực kỳ quan trọng cho trackpad/touch */
  overscroll-behavior: none;         /* không “bật” trang */
}

/* Toolbar nhỏ dán lên viewer (nếu dùng) */
.viewer .toolbar,
.xk-toolbar{
  position:absolute; z-index:20; top:12px; left:12px;
  display:flex; gap:8px; flex-wrap:wrap;
  background:rgba(255,255,255,.85); backdrop-filter:saturate(180%) blur(6px);
  border:1px solid var(--border); border-radius:10px; padding:8px;
  box-shadow:0 4px 14px rgba(0,0,0,.08);
}
.viewer .toolbar .btn,
.xk-toolbar .btn{
  padding:6px 10px; border-radius:8px; font-size:13px; line-height:1;
}

/* Ghi chú / text phụ */
.muted{ color:var(--muted); font-size:13px }
.note{ font-size:13px; padding:10px 16px; color:var(--muted) }

/* Embeds fallback */
iframe,embed{
  display:block; width:100%; height:calc(100vh - 160px);
  border:none; background:#fff;
}

/* Media */
.img-preview{
  display:block; width:100%; height:auto;
  border-radius:var(--radius); border:1px solid var(--border); background:#fff;
}
video{ display:block; width:100%; max-height:calc(100vh - 160px); background:#000; border-radius:var(--radius) }
audio{ display:block; width:100%; margin-top:8px }

/* Code block */
pre.code{
  background:#f3f4f6; color:#1f2937; padding:16px; margin:0;
  overflow:auto; min-height:calc(100vh - 160px);
  font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,"Courier New",monospace;
  border-radius:var(--radius); border:1px solid var(--border);
}

/* Responsive */
@media (max-width: 1024px){
  .file{ max-width:60% }
}
@media (max-width: 768px){
  .file{ max-width:55% }
  .wrap{ padding:0 10px 16px }
  #xeokitCanvas,
  .viewer canvas,
  .ifc-view,
  iframe,embed{ height:calc(100vh - 200px) }
}
